<center><h1>
    开发文档
    </h1>   </center>

## 1创意来源

​	弹幕游戏是一种传统的游戏形式，通常游戏速度越快，对于玩家的反应速度和规划能力要求更好，难度更高，若速度减慢，则难度随之降低，故考虑将时间的流逝本身放入游戏机制中，若玩家不按下任何一个键，则游戏的时间流逝减缓，而若玩家按下任何一个键，游戏时间流逝加快，从而给玩家新奇的体验。 

## 2 开发环境

​	python 3.11.4 ，依赖的第三方库有 pygame 2.5.2,

​	运行方式：可以执行main.py或者main.exe

## 3 游戏内容

​	游戏内容包括一个随机的无尽模式和一个具有四个关卡的故事模式，具有四种敌人，四种特殊遭遇，两种坍缩范式，玩家具有加速移动和隐蔽两种特殊效果

## 4开发细节概述

#### $~~~~$(1).源文件文件构成

​		main.py:游戏主要控制部分

​		game_functions.py:游戏主要功能实现部分

​		Photo.py:游戏图片处理部分

​		Settings.py:游戏设置控制部分

​		Status.py:游戏状态控制部分

​		message.py:游戏中文字显示控制部分

​		story.py:游戏故事模式控制部分

​		encounters.py:游戏中特殊遭遇控制部分

​		collapse_paradigm.py:游戏中坍缩范式控制部分

​		background.py：游戏中背景图片控制部分

​		Buttion.py：游戏中按钮控制部分

​		collapsed_construction.py:游戏中对于collapsed_construction这一敌人的控制部分

​		explosives.py:游戏中对于explosive和warning这两种敌人的控制部分

​		player.py:游戏中对于player的控制部分

​		realm.py:游戏中对于realm敌人的控制部分

​		tainted_carcass.py:游戏中对于tainted_carcass这一敌人的控制部分

​		font：存放游戏中的字体

​		music：存放游戏中的音乐

​		photo：存放游戏中的图片

#### $~~~~$(2).对于时间的控制

​		A:对于敌人的移动：根据键盘的状态对移动距离进行缩放

​		B:对于事件的发生：对于每个事件设置一个变量用于储存游戏内经过了多久，具体计算为$T_{游戏内经过}=\frac{t_{上次实际计算的时刻}-t_{本次实际计算的时刻}}{ R_{比例}}$，比例由当前键盘的状态确定

​		C:对于键盘状态的确定:设置一个变量 $game\_KEYDOWN\_cnt$ 用于统计有多少按键被按下，每有一次 $KEYDOWN$ 事件发生则 $+1$，每有一次 $KEYUP$ 事件发生则 $-1$，进而确定变量 $game\_KEYDOWN$ 的状态

### $~~~~$ (3) 游戏流程

​	游戏分为三个主要阶段

 	1. 游戏前阶段：此阶段提供按钮，供玩家选择退出，随机模式或者是故事模式
 	2. 游戏中阶段：此阶段为游戏的主要流程部分
 	3. 游戏后阶段：此阶段分为失败和成功两种状态，分别显示坚持的时间和祝贺通关的语句

## 体会

​	设计游戏时对于时间流逝问题一开始决定简单地对于时间更新采用$t_{当前时间}>=T_{时间开始}* \Delta T*R_{比例}$的方式，后面发现按照这个方式会出现"瞬移"现象，故后面更换了计算方式，在每秒120帧下按照新公式误差应该可以控制在毫秒级，可以较好的模拟时间的特殊流逝方式

​	对于多文件编程有了更深的体会，将相同功能的代码放到同一个文件中，便于理解，也便于后期的修改和debug

​	对于python的一些语言特性有了更深的体会，比如说浅拷贝和类的继承

​	对于较多代码量的工程的调试有了初步的体会，同时，意识到了命名规范等标准的重要性，这是我在大一仅仅写几十行的代码的时候所体会不到的。







 